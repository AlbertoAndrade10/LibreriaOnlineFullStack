<div class="flex items-center justify-center">
    <form [formGroup]="updateBookForm" (ngSubmit)="onSubmit()"
        class="flex flex-col items-center justify-center h-full w-full max-w-md p-6 bg-white rounded-lg shadow-md">
        <h2 class="text-2xl font-bold mb-6 text-center">Actualizar Libro</h2>

        <!-- Nombre del libro -->
        <div class="w-full mb-4">
            <label for="bookName" class="block text-sm font-medium text-gray-700 mb-1">
                Nombre del libro
            </label>
            <input type="text" id="bookName" formControlName="bookName" placeholder="Introduce el nombre del libro"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" />
            @if (updateBookForm.get('bookName')?.invalid && updateBookForm.get('bookName')?.touched) {
            <div class="text-red-500 text-xs mt-1">
                El nombre del libro es requerido.
            </div>
            }
        </div>

        <!-- Nombre del autor -->
        <div class="w-full mb-4">
            <label for="authorId" class="block text-sm font-medium text-gray-700 mb-1">
                Nombre del Autor
            </label>
            <select id="authorId" formControlName="authorId"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white">
                <option value="" disabled selected>Selecciona un autor</option>
                @for (author of authors; track author.id) {
                <option [value]="author.id">{{ author.authorName }}</option>
                }
            </select>
            @if (updateBookForm.get('authorId')?.invalid && updateBookForm.get('authorId')?.touched) {
            <div class="text-red-500 text-xs mt-1">
                Debes seleccionar un autor.
            </div>
            }
        </div>

        <!-- Género Literario -->
        <div class="w-full mb-4">
            <label for="literaryGenreId" class="block text-sm font-medium text-gray-700 mb-1">
                Género Literario
            </label>
            <select id="literaryGenreId" formControlName="literaryGenreId"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white">
                <option value="" disabled selected>Selecciona un género</option>
                @for (genre of literaryGenres; track genre.id) {
                <option [value]="genre.id">{{ genre.literaryGenreName }}</option>
                }
            </select>
            @if (updateBookForm.get('literaryGenreId')?.invalid && updateBookForm.get('literaryGenreId')?.touched) {
            <div class="text-red-500 text-xs mt-1">
                Debes seleccionar un género.
            </div>
            }
        </div>

        <!-- Precio -->
        <div class="w-full mb-4">
            <label for="price" class="block text-sm font-medium text-gray-700 mb-1">
                Precio (€)
            </label>
            <input type="number" id="price" formControlName="price" placeholder="0.00" min="0" step="0.01"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" />
            @if (updateBookForm.get('price')?.invalid && updateBookForm.get('price')?.touched) {
            <div class="text-red-500 text-xs mt-1">
                El precio es requerido y debe ser un número positivo.
            </div>
            }
        </div>

        <!-- Descripción -->
        <div class="w-full mb-4">
            <label for="description" class="block text-sm font-medium text-gray-700 mb-1">
                Descripción
            </label>
            <textarea id="description" formControlName="description" rows="3" placeholder="Breve descripción del libro"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
            @if (updateBookForm.get('description')?.invalid && updateBookForm.get('description')?.touched) {
            <div class="text-red-500 text-xs mt-1">
                La descripción es requerida.
            </div>
            }
        </div>

        <!-- Stock -->
        <div class="w-full mb-6">
            <label for="stock" class="block text-sm font-medium text-gray-700 mb-1">
                Stock
            </label>
            <input type="number" id="stock" formControlName="stock" placeholder="Cantidad disponible" min="1"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" />
            @if (updateBookForm.get('stock')?.invalid && updateBookForm.get('stock')?.touched) {
            <div class="text-red-500 text-xs mt-1">
                El stock es requerido y debe ser un número positivo (mínimo 1).
            </div>
            }
        </div>

        <!-- Imagen (Opcional) -->
        <div class="w-full mb-6">
            <label for="urlImage" class="block text-sm font-medium text-gray-700 mb-1">
                URL de la Imagen (Opcional)
            </label>
            <input type="text" id="urlImage" formControlName="urlImage" placeholder="https://ejemplo.com/imagen.jpg"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" />
        </div>

        <!-- Botón de submit -->

        <div class="flex space-x-1">

            <button type="submit" [disabled]="updateBookForm.invalid || loading" class="cursor-pointer w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-md transition
            duration-200 disabled:opacity-50 disabled:cursor-not-allowed">
                @if (loading) {
                Actualizando...
                } @else {
                Actualizar Libro
                }
            </button>

            <!-- Botón para cerrar el formulario -->
            <button type="button" (click)="onCancel()"
                class="mt-2 cursor-pointer w-full bg-gray-500 hover:bg-gray-600 text-white font-medium py-2 px-4 rounded-md transition duration-200">
                Cancelar
            </button>
        </div>


        <!-- Mostrar mensaje de error si lo hay -->
        @if (errorMessage) {
        <div class="mt-4 text-red-500 text-sm text-center">
            {{ errorMessage }}
        </div>
        }

        <!-- Mostrar mensaje de carga si lo hay -->
        @if (loading) {
        <div class="mt-4 text-gray-500 text-sm text-center">
            Por favor, espere...
        </div>
        }
    </form>
</div>